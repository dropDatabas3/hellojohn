# --- Entorno ---
APP_ENV=dev  # dev|staging|prod

# --- Server ---
SERVER_ADDR=:8080
# CSV (separa por comas). Podés sumar http://127.0.0.1:3000 si lo necesitás.
SERVER_CORS_ALLOWED_ORIGINS=http://localhost:3000

# --- Storage ---
STORAGE_DRIVER=postgres
STORAGE_DSN=postgres://postgres:postgres@localhost:5432/hellojohn?sslmode=disable
POSTGRES_MAX_OPEN_CONNS=30
POSTGRES_MAX_IDLE_CONNS=10
POSTGRES_CONN_MAX_LIFETIME=30m

# --- Cache / Rate ---
CACHE_KIND=memory
# Si usas redis:
#CACHE_KIND=redis
#REDIS_ADDR=localhost:6379
#REDIS_DB=0
#REDIS_PREFIX=hj:
RATE_ENABLED=true
RATE_WINDOW=1m
RATE_MAX_REQUESTS=60

# --- JWT ---
JWT_ISSUER=http://localhost:8080
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=720h

# --- Register / Auth ---
REGISTER_AUTO_LOGIN=true
AUTH_ALLOW_BEARER_SESSION=true
AUTH_SESSION_COOKIE_NAME=sid
AUTH_SESSION_DOMAIN=
AUTH_SESSION_SAMESITE=Lax
AUTH_SESSION_SECURE=false
AUTH_SESSION_TTL=12h

AUTH_RESET_TTL=1h
AUTH_RESET_AUTO_LOGIN=true
AUTH_VERIFY_TTL=48h

# --- SMTP (rellenar para enviar mails reales) ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=tu_usuario@gmail.com
SMTP_PASSWORD=tu_password_ou_app_password
SMTP_FROM=tu_usuario@gmail.com
SMTP_TLS=starttls
SMTP_INSECURE_SKIP_VERIFY=false

# --- Email ---
EMAIL_BASE_URL=http://localhost:8080
EMAIL_TEMPLATES_DIR=./templates
EMAIL_DEBUG_LINKS=true  # Dev: útil para test. En prod se fuerza a false.

# --- Seguridad (password policy) ---
SECURITY_PASSWORD_POLICY_MIN_LENGTH=10
SECURITY_PASSWORD_POLICY_REQUIRE_UPPER=true
SECURITY_PASSWORD_POLICY_REQUIRE_LOWER=true
SECURITY_PASSWORD_POLICY_REQUIRE_DIGIT=true
SECURITY_PASSWORD_POLICY_REQUIRE_SYMBOL=false

# --- Flags ---
FLAGS_MIGRATE=true

# ───────── Providers: Google ─────────
# Habilita Google OAuth (Authorization Code vía backend)
GOOGLE_ENABLED=false

# Tus credenciales de Google (Console → APIs & Services → Credentials)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Si lo dejás vacío, se autogenera como: <JWT_ISSUER>/v1/auth/social/google/callback
# Para este example sería: http://localhost:8080/v1/auth/social/google/callback
GOOGLE_REDIRECT_URL=

# Scopes (CSV)
GOOGLE_SCOPES=openid,email,profile

# Restricciones opcionales (vacío => todos)
# Tenants por UUID (separados por coma) y Client IDs internos (p.ej., web-frontend)
GOOGLE_ALLOWED_TENANTS=
GOOGLE_ALLOWED_CLIENTS=
