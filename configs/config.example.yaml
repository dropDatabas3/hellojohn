server:
  addr: ":8080"
  cors_allowed_origins:
    - "http://localhost:3000"
    - "http://127.0.0.1:3000"

storage:
  driver: "postgres"
  dsn: "postgres://user:password@localhost:5432/login?sslmode=disable"
  postgres:
    max_open_conns: 30
    max_idle_conns: 5
    conn_max_lifetime: "30m"
  mysql:
    dsn: "user:pass@tcp(localhost:3306)/login?parseTime=true&charset=utf8mb4"
  mongo:
    uri: "mongodb://user:pass@localhost:27017"
    database: "login"

cache:
  kind: "redis"
  redis:
    addr: "localhost:6379"
    db: 0
    prefix: "login:"
  memory:
    default_ttl: "2m"

jwt:
  issuer: "http://localhost:8080"
  access_ttl: "15m"
  refresh_ttl: "720h"   # 30d

auth:
  allow_bearer_session: true
  session:
    cookie_name: "sid"
    samesite: "Lax"
    secure: false   # true en prod (https)
    ttl: "12h"


register:
  auto_login: true

rate:
  enabled: true
  window: "1m"
  max_requests: 60

flags:
  migrate: true
