#Para test_rate_emailflows.ps1 (2do forgot â†’ 429 + Retry-After).
APP_ENV=prod

SERVER_ADDR=:8080
SERVER_CORS_ALLOWED_ORIGINS=http://localhost:3000

STORAGE_DRIVER=postgres
STORAGE_DSN=postgres://user:password@localhost:5432/login?sslmode=disable

CACHE_KIND=redis
REDIS_ADDR=localhost:6379
REDIS_DB=0
REDIS_PREFIX=login:
RATE_ENABLED=true
RATE_WINDOW=30s
RATE_MAX_REQUESTS=1

JWT_ISSUER=http://localhost:8080
JWT_ACCESS_TTL=15m
JWT_REFRESH_TTL=720h

REGISTER_AUTO_LOGIN=true
AUTH_ALLOW_BEARER_SESSION=true
AUTH_SESSION_COOKIE_NAME=sid
AUTH_SESSION_SAMESITE=Lax
AUTH_SESSION_SECURE=false
AUTH_SESSION_TTL=12h

AUTH_VERIFY_TTL=48h
AUTH_RESET_TTL=1h
AUTH_RESET_AUTO_LOGIN=true

# SMTP: igual que .env.dev (Gmail o MailHog)
SMTP_HOST=127.0.0.1
SMTP_PORT=1025
SMTP_FROM=dev@example.local
SMTP_TLS=none
SMTP_INSECURE_SKIP_VERIFY=false

EMAIL_BASE_URL=http://localhost:8080
EMAIL_TEMPLATES_DIR=./templates
EMAIL_DEBUG_LINKS=true   # puede estar en true; no afecta rate tests

SECURITY_PASSWORD_POLICY_MIN_LENGTH=10
SECURITY_PASSWORD_POLICY_REQUIRE_UPPER=true
SECURITY_PASSWORD_POLICY_REQUIRE_LOWER=true
SECURITY_PASSWORD_POLICY_REQUIRE_DIGIT=true
SECURITY_PASSWORD_POLICY_REQUIRE_SYMBOL=false

FLAGS_MIGRATE=true
